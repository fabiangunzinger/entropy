facet_wrap(~nunique_tag)
# txn count
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(txns_count_spend_q)), alpha=1) +
facet_wrap(~nunique_tag)
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(ps_sd_q)), alpha=1) +
facet_wrap(~nunique_tag)
# txn count
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(txns_count_spend_q)), alpha=1) +
facet_wrap(~nunique_tag)
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(std_tag_q)), alpha=1) +
facet_wrap(~nunique_tag)
d <- df %>%
sample_frac(0.1) %>%
rowwise() %>%
mutate(
across(matches(p, perl = T), ~(.x + 1) / (txns_count_spend + 9), .names = "ps_{col}"),
across(matches(p, perl = T), ~.x / txns_count_spend, .names = "p_{col}"),
ps_sd = sd(c_across(starts_with("ps_"))),
p_sd = sd(c_across(starts_with("p_"))),
) %>%
ungroup() %>%
mutate(
std_tag_q = ntile(std_tag, 5),
p_sd_q = ntile(p_sd, 5),
ps_sd_q = ntile(ps_sd, 5),
txns_count_spend_q = ntile(txns_count_spend, 5),
)
# txn count
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(txns_count_spend_q)), alpha=1) +
facet_wrap(~nunique_tag)
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(std_tag_q)), alpha=1) +
facet_wrap(~nunique_tag)
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(ps_sd_q)), alpha=1) +
facet_wrap(~nunique_tag)
facet_var <- c("ps_sd_q")
for (v in facet_var) {
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(ps_sd_q)), alpha=1) +
facet_wrap(~nunique_tag)
fn <- glue("scatter_facet_{v}")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
for (v in facet_var) {
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(ps_sd_q)), alpha=1) +
facet_wrap(~nunique_tag)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
for (v in facet_var) {
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=1) +
facet_wrap(~nunique_tag)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
facet_var <- c("ps_sd_q", "txns_count_spend_q", "std_tag_q")
for (v in facet_var) {
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=1) +
facet_wrap(~nunique_tag)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
library(glue)
library(fixest)
library(tidyverse)
for (v in facet_var) {
print(v)
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=1) +
facet_wrap(~nunique_tag)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
for (v in facet_var) {
print(v)
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=0.8) +
facet_wrap(~nunique_tag)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
d <- df %>%
sample_frac(0.1) %>%
rowwise() %>%
mutate(
across(matches(p, perl = T), ~(.x + 1) / (txns_count_spend + 9), .names = "ps_{col}"),
across(matches(p, perl = T), ~.x / txns_count_spend, .names = "p_{col}"),
ps_std = sd(c_across(starts_with("ps_"))),
p_std = sd(c_across(starts_with("p_"))),
) %>%
ungroup() %>%
mutate(
std_tag_q = ntile(std_tag, 5),
p_std_q = ntile(p_std, 5),
ps_std_q = ntile(ps_std, 5),
txns_count_spend_q = ntile(txns_count_spend, 5)
)
facet_var <- c("ps_std_q", "txns_count_spend_q", "std_tag_q")
for (v in facet_var) {
print(v)
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=0.8) +
facet_wrap(~nunique_tag)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
facet_var <- c("ps_std_q")
facet_var <- c("ps_std_q")
for (v in facet_var) {
print(v)
d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=0.8) +
facet_wrap(~nunique_tag)
# fn <- glue("scatter_facet_{v}.png")
# ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
for (v in facet_var) {
print(v)
g <- d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=0.8) +
facet_wrap(~nunique_tag)
# fn <- glue("scatter_facet_{v}.png")
# ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
g
for (v in facet_var) {
print(v)
g <- d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=0.8) +
facet_wrap(~nunique_tag, ncol = 5)
# fn <- glue("scatter_facet_{v}.png")
# ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
g
for (v in facet_var) {
print(v)
g <- d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=0.8) +
facet_wrap(~nunique_tag, ncol = 5) +
theme(legend.position = "top")
# fn <- glue("scatter_facet_{v}.png")
# ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
g
facet_var <- c("ps_std_q", "txns_count_spend_q", "std_tag_q")
for (v in facet_var) {
print(v)
g <- d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=0.8) +
facet_wrap(~nunique_tag, ncol = 5) +
theme(legend.position = "top")
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
g
facet_var <- c("ps_std_q")
for (v in facet_var) {
print(v)
g <- d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=0.8) +
facet_wrap(~nunique_tag, nrow = 1) +
theme(legend.position = "top")
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
g
for (v in facet_var) {
print(v)
g <- d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=0.8) +
facet_wrap(~nunique_tag, nrow = 2) +
theme(legend.position = "top")
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
for (v in facet_var) {
print(v)
g <- d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=0.8) +
facet_wrap(~nunique_tag, nrow = 3) +
theme(legend.position = "top")
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
facet_var <- c("ps_std_q", "txns_count_spend_q", "std_tag_q")
for (v in facet_var) {
print(v)
g <- d %>%
ggplot() +
geom_point(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]])), alpha=0.8) +
facet_wrap(~nunique_tag, nrow = 3) +
theme(legend.position = "top")
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=0.8) +
facet_wrap(~nunique_tag, nrow = 3) +
theme(legend.position = "top")
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=0.8) +
facet_wrap(~nunique_tag) +
theme(legend.position = "top")
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
facet_var <- c("ps_std_q")
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=0.8) +
facet_wrap(~nunique_tag)
# +
# theme(legend.position = "top")
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=0.5) +
facet_wrap(~nunique_tag)
# +
# theme(legend.position = "top")
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
g
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=0.5) +
facet_wrap(~nunique_tag) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
color = varlabs[[v]]
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
source('src/config.R')
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=0.5) +
facet_wrap(~nunique_tag) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
color = varlabs[[v]]
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
g
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=0.5) +
facet_wrap(~nunique_tag) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
colour = varlabs[[v]]
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
g
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=0.5) +
facet_wrap(~nunique_tag) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
colour = expression(varlabs[[v]])
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
g
install.packages("latex2exp")
library(latex2exp)
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=0.5) +
facet_wrap(~nunique_tag) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
colour = unname(TeX(varlabs[[v]]))
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
g
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=1) +
facet_wrap(~nunique_tag) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
colour = unname(TeX(varlabs[[v]]))
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
facet_var <- c("ps_std_q", "txns_count_spend_q", "std_tag_q")
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=1) +
facet_wrap(~nunique_tag) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
colour = unname(TeX(varlabs[[v]]))
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
source('src/config.R')
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=1) +
facet_wrap(~nunique_tag) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
colour = unname(TeX(varlabs[[v]]))
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
"x" + "ho"
facet_var <- c("ps_std_q")
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=1) +
facet_wrap(~nunique_tag, labeller = paste(~.x + "")) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
colour = unname(TeX(varlabs[[v]]))
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
?facet_wrap
source('src/config.R')
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=1) +
facet_wrap(~nunique_tag, labeller = paste(~.x + "")) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
colour = unname(TeX(varlabs[[v]]))
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
facet_var <- c("ps_std_q", "txns_count_spend_q", "std_tag_q")
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=1) +
facet_wrap(~nunique_tag, labeller = paste(~.x + "")) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
colour = unname(TeX(varlabs[[v]]))
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=1) +
facet_wrap(~nunique_tag) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
colour = unname(TeX(varlabs[[v]]))
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=1) +
facet_wrap(~nunique_tag) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
colour = unname(TeX(varlabs[[v]]))
) +
theme(
axis.title=element_text(size = 20),
axis.text = element_text(size = 20),
legend.text = element_text(size = 20)
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=1) +
facet_wrap(~nunique_tag) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
colour = unname(TeX(varlabs[[v]]))
) +
theme(
axis.title=element_text(size = 20),
axis.text = element_text(size = 20),
legend.text = element_text(size = 20),
legend.title=element_text(size = 20)
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
for (v in facet_var) {
print(v)
g <- d %>%
ggplot(aes(entropy_tag, entropy_tag_s, colour=factor(.data[[v]]))) +
geom_point(alpha=1) +
facet_wrap(~nunique_tag) +
labs(
x = varlabs[["entropy_tag"]],
y = varlabs[["entropy_tag_s"]],
colour = unname(TeX(varlabs[[v]]))
) +
theme(
axis.title=element_text(size = 20),
axis.text = element_text(size = 20),
legend.text = element_text(size = 20),
legend.title=element_text(size = 20)
)
fn <- glue("scatter_facet_{v}.png")
ggsave(file.path(FIGDIR, fn), height = 2000, width = 3000, units = "px")
}
g

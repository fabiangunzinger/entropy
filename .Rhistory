geom_point()
df %>%
filter(user_id == 1210 & ymn == 201205) %>%
select(user_id, matches("^count_")) %>%
pivot_longer(!user_id) %>%
ggplot(aes(reorder(name, -value), value)) +
geom_point()
# Entropy hist
df %>%
ggplot(aes(entropy_tag_spend_z)) +
geom_density(colour = palette[1]) +
labs(x = varlabs["entropy_tag_spend_z"], y = "Density")
# Spend profile
df %>%
filter(user_id == 1210 & ymn == 201205) %>%
select(user_id, matches("^count_")) %>%
pivot_longer(!user_id) %>%
ggplot(aes(reorder(name, -value), value)) +
geom_point()
library(tidyverse)
df %>%
filter(entropy_tag_spend = nlargest(entropy_tag_spend, 5))
df %>%
filter(entropy_tag_spend == nlargest(entropy_tag_spend, 5))
df %>%
filter(nlargest(entropy_tag_spend, 5))
df %>%
filter(top_n(entropy_tag_spend, 5))
?top_n
df %>%
top_n(entropy_tag_spend, 5)
df %>%
slice_max(entropy_tag_spend, 5) %>%
df %>%
filter(user_id == 1210 & ymn == 201205) %>%
select(user_id, matches("^count_")) %>%
pivot_longer(!user_id) %>%
ggplot(aes(reorder(name, -value), value)) +
geom_point()
df %>%
slice_max(entropy_tag_spend, 5)
df %>%
slice_max(entropy_tag_spend, n = 5)
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
select(user_id, ymn, matches("^count_")) %>%
pivot_longer(!user_id, !ymn)
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
select(user_id, ymn, matches("^count_"))
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
select(user_id, ymn, matches("^count_")) %>%
pivot_longer(!user_id, ymn)
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
select(user_id, ymn, matches("^count_")) %>%
pivot_longer(!(user_id, ymn))
?pivot_longer
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
select(user_id, ymn, matches("^count_")) %>%
pivot_longer(!user_id)
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
mutate(userym = user_id + ymn) %>%
select(userym, matches("^count_"))
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
mutate(userymn = user_id + ymn) %>%
select(userymn, matches("^count_"))
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
mutate(userymn = user_id * 10000 + ymn) %>%
select(userymn, matches("^count_"))
df$ymn
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
mutate(userymn = user_id * 100000 + ymn) %>%
select(userymn, matches("^count_"))
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_"))
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn)
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot(aes(reorder(name, -value), value)) +
geom_point()
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot(aes(reorder(name, -value), value)) +
geom_point() %>%
facet_wrap(~userymn)
df %>%
slice_max(entropy_tag_spend, n = 5) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot(aes(reorder(name, -value), value)) +
geom_point() +
facet_wrap(~userymn)
df %>%
slice_max(entropy_tag_spend, n = 6) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot(aes(reorder(name, -value), value)) +
geom_point() +
facet_wrap(~userymn)
df %>%
slice_max(entropy_tag_spend, n = 6) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot() +
facet_wrap(~userymn)
df %>%
slice_max(entropy_tag_spend, n = 6) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot() +
facet_wrap(~userymn) +
geom_point(aes(reorder(name, -value), value))
df %>%
slice_max(entropy_tag_spend, n = 6) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot() +
geom_point(aes(reorder(name, -value), value)) +
facet_wrap(~userymn)
df %>%
slice_max(entropy_tag_spend, n = 6) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot() +
geom_point(aes(reorder(name, -value), value)) +
facet_wrap(~userymn)
df %>%
slice_max(entropy_tag_spend, n = 6) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value), value)) +
facet_wrap(~userymn)
library(tidytext)
install.packages("tidytext")
df %>%
slice_max(entropy_tag_spend, n = 6) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value), value)) +
facet_wrap(~userymn)
install.packages("tidytext")
library(tidytext)
df %>%
slice_max(entropy_tag_spend, n = 6) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value), value)) +
facet_wrap(~userymn)
df %>%
slice_max(entropy_tag_spend, n = 6) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, userymn), value)) +
facet_wrap(~userymn)
theme_set(theme_minimal())
df %>%
slice_max(entropy_tag_spend, n = 6) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, userymn), value)) +
facet_wrap(~userymn)
df %>%
slice_min(entropy_tag_spend, n = 6) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, userymn), value)) +
facet_wrap(~userymn)
df %>%
arrange(entropy_tag_spend)
df %>%
arrange(entropy_tag_spend) %>%
slice(1:5)
df %>%
arrange(entropy_tag_spend) %>%
slice(1:2)
?slice
df %>%
slice_min(entropy_tag_spend, n = 6)
df %>%
slice_min(entropy_tag_spend, n = 6) %>%
mutate(userymn = user_id * 1000000 + ymn) %>%
select(userymn, matches("^count_")) %>%
pivot_longer(!userymn) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, userymn), value)) +
facet_wrap(~userymn)
library(dplyr)
library(ggplot2)
library(tidyverse)
library(tidytext)
source('src/config.R')
source('src/helpers/helpers.R')
theme_set(theme_minimal())
df <- read_debug_data()
df %>%
arrange(entropy_tag_spend) %>%
slice(-2L)
df %>%
arrange(entropy_tag_spend) %>%
slice(-2L:-1L)
df %>%
arrange(entropy_tag_spend) %>%
slice(1L)
df %>%
arrange(entropy_tag_spend) %>%
slice(1L:2L)
df %>%
arrange(entropy_tag_spend) %>%
slice(-1L)
df %>%
arrange(entropy_tag_spend) %>%
filter(row_number() == -1L)
df %>%
arrange(entropy_tag_spend) %>%
filter(row_number() == 1L)
df
df %>%
arrange(entropy_tag_spend) %>%
select(1:5)
df %>%
arrange(entropy_tag_spend) %>%
slice(1:5)
df %>%
arrange(entropy_tag_spend) %>%
slice(-1L)
df %>%
arrange(entropy_tag_spend) %>%
slice(-2L:-1L)
df %>%
arrange(entropy_tag_spend) %>%
slice(-(2:n()))
df %>%
arrange(entropy_tag_spend) %>%
slice(-(2:-2L))
df %>%
arrange(entropy_tag_spend) %>%
slice(-(2:2L))
slice(-(2:(n()-2))
df %>%
df %>%
arrange(entropy_tag_spend) %>%
slice(-(2:(n()-2)))
df %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n()-3)))
df %>%
arrange(entropy_tag_spend) %>%
filter(entropy_tag_spend > 0) %>%
slice(-(4:(n()-3)))
k <- df %>%
arrange(entropy_tag_spend) %>%
filter(entropy_tag_spend > 0) %>%
slice(-(4:(n()-3))) %>%
select(entropy_tag_spend, matches("^count_")) %>%
pivot_longer(!entropy_tag_spend)
k
k %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, userymn), value)) +
facet_wrap(~userymn)
k %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, entropy_tag_spend), value)) +
facet_wrap(~userymn)
k %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, entropy_tag_spend), value)) +
facet_wrap(~entropy_tag_spend)
k
k %>%
filter(value > 0)
df
df %>%
filter(spend_cash < 0.1 * spend_month)
df %>%
filter(spend_cash < 0.1 * month_spend)
df %>%
filter(entropy == 0)
df %>%
filter(entropy_tag_spend == 0)
df %>%
filter(entropy_tag_spend == 0) %>%
select(entropy_tag_spend, matches("^count_")) %>%
pivot_longer(!entropy_tag_spend)
df %>%
filter(entropy_tag_spend == 0) %>%
select(entropy_tag_spend, matches("^count_")) %>%
pivot_longer(!entropy_tag_spend) %>%
filter(value > 0)
df %>%
filter(entropy_tag_spend == 0) %>%
select(entropy_tag_spend, matches("^count_")) %>%
pivot_longer(!entropy_tag_spend) %>%
filter(value > 0) %>%
group_by(name) %>%
count()
# Spend profile of min and max entropy cases
k <- df %>%
filter(spend_cash < 0.1 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n()-3))) %>%
select(entropy_tag_spend, matches("^count_")) %>%
pivot_longer(!entropy_tag_spend) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, entropy_tag_spend), value)) +
facet_wrap(~entropy_tag_spend)
k %>%
filter(value > 0)
k
# Spend profile of min and max entropy cases
k <- df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n()-3))) %>%
select(entropy_tag_spend, matches("^count_")) %>%
pivot_longer(!entropy_tag_spend) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, entropy_tag_spend), value)) +
facet_wrap(~entropy_tag_spend)
k
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend)
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3)))
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3))) %>%
select(entropy_tag_spend, matches("^count_")) %>%
pivot_longer(!entropy_tag_spend)
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3))) %>%
select(entropy_tag_spend, matches("^count_")) %>%
pivot_longer(!entropy_tag_spend) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, entropy_tag_spend), value)) +
facet_wrap(~entropy_tag_spend)
select(userymn, entropy_tag_spend, matches("^count_"))
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3))) %>%
mutate(userymn = string(user_id) + string(ymn)) %>%
select(userymn, entropy_tag_spend, matches("^count_"))
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3))) %>%
mutate(userymn = user_id * 1e6 + ymn) %>%
select(userymn, entropy_tag_spend, matches("^count_"))
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3))) %>%
mutate(userymn = user_id * 1e6 + ymn) %>%
select(userymn, entropy_tag_spend, matches("^count_")) %>%
pivot_longer(match("^count_")) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, entropy_tag_spend), value)) +
facet_wrap(~entropy_tag_spend)
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3))) %>%
mutate(userymn = user_id * 1e6 + ymn) %>%
select(userymn, entropy_tag_spend, matches("^count_")) %>%
pivot_longer(columns = match("^count_")) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, entropy_tag_spend), value)) +
facet_wrap(~entropy_tag_spend)
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3))) %>%
mutate(userymn = user_id * 1e6 + ymn) %>%
select(userymn, entropy_tag_spend, matches("^count_")) %>%
pivot_longer(columns = "^count_") %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, entropy_tag_spend), value)) +
facet_wrap(~entropy_tag_spend)
?pivot_longer
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3))) %>%
mutate(userymn = user_id * 1e6 + ymn) %>%
select(userymn, entropy_tag_spend, matches("^count_")) %>%
pivot_longer(cols = "^count_") %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, entropy_tag_spend), value)) +
facet_wrap(~entropy_tag_spend)
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3))) %>%
mutate(userymn = user_id * 1e6 + ymn) %>%
select(userymn, entropy_tag_spend, matches("^count_")) %>%
pivot_longer(cols = matches("^count_")) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, entropy_tag_spend), value)) +
facet_wrap(~entropy_tag_spend)
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3))) %>%
mutate(userymn = user_id * 1e6 + ymn) %>%
select(userymn, entropy_tag_spend, matches("^count_")) %>%
pivot_longer(cols = matches("^count_")) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, userymn), value)) +
facet_wrap(~userymn)
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3))) %>%
mutate(userymn = user_id * 1e6 + ymn) %>%
select(userymn, entropy_tag_spend, matches("^count_")) %>%
pivot_longer(cols = matches("^count_"))
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3))) %>%
mutate(userymn = user_id * 1e6 + ymn) %>%
select(userymn, entropy_tag_spend, matches("^count_")) %>%
pivot_longer(cols = matches("^count_")) %>%
ggplot() +
geom_point(aes(reorder_within(name, -entropy_tag_spend, userymn), value)) +
facet_wrap(~userymn)
# Spend profile of min and max entropy cases
df %>%
filter(spend_cash < 0.05 * month_spend,
entropy_tag_spend > 0) %>%
arrange(entropy_tag_spend) %>%
slice(-(4:(n() - 3))) %>%
mutate(userymn = user_id * 1e6 + ymn) %>%
select(userymn, entropy_tag_spend, matches("^count_")) %>%
pivot_longer(cols = matches("^count_")) %>%
ggplot() +
geom_point(aes(reorder_within(name, -value, userymn), value)) +
facet_wrap(~userymn)

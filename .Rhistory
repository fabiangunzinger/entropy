# ggsave(file.path(FIGDIR, fn),
#        height = 2000,
#        width = 3000,
#        units = "px")
print(g)
}
varlabs[['entropy_tag_spend']]
c(varlabs[['entropy_tag_spend']], varlabs[['entropy_tag_spend_s']])
legendlabs <- c(varlabs[['entropy_tag_spend']], varlabs[['entropy_tag_spend_s']])
for (c in components) {
fn <- glue("smoothing_on_{c}.png")
g <- df %>%
group_by(x = .data[[c]]) %>%
summarise(across(matches("entropy_tag_spend$|entropy_tag_spend_s$"), ~mean(.x))) %>%
ungroup() %>%
filter(ntile(x, 100) <= 95) %>%
pivot_longer(!x) %>%
ggplot(aes(x, value, colour=name)) +
geom_point(alpha = 0.5) +
scale_color_hue(labels = legendlabs)
# ggsave(file.path(FIGDIR, fn),
#        height = 2000,
#        width = 3000,
#        units = "px")
print(g)
}
g <- df %>%
group_by(x = .data[[c]]) %>%
summarise(across(matches("entropy_tag_spend$|entropy_tag_spend_s$"), ~mean(.x))) %>%
ungroup() %>%
filter(ntile(x, 100) <= 95) %>%
pivot_longer(!x) %>%
ggplot(aes(x, value, colour=name)) +
geom_point(alpha = 0.5) +
scale_color_hue(labels = legendlabs) +
labs(x = varlabs[[c]], y = "Entropy")
for (c in components) {
fn <- glue("smoothing_on_{c}.png")
g <- df %>%
group_by(x = .data[[c]]) %>%
summarise(across(matches("entropy_tag_spend$|entropy_tag_spend_s$"), ~mean(.x))) %>%
ungroup() %>%
filter(ntile(x, 100) <= 95) %>%
pivot_longer(!x) %>%
ggplot(aes(x, value, colour=name)) +
geom_point(alpha = 0.5) +
scale_color_hue(labels = legendlabs) +
labs(x = varlabs[[c]], y = "Entropy")
# ggsave(file.path(FIGDIR, fn),
#        height = 2000,
#        width = 3000,
#        units = "px")
print(g)
}
for (c in components) {
fn <- glue("smoothing_on_{c}.png")
g <- df %>%
group_by(x = .data[[c]]) %>%
summarise(across(matches("entropy_tag_spend$|entropy_tag_spend_s$"), ~mean(.x))) %>%
ungroup() %>%
filter(ntile(x, 100) <= 95) %>%
pivot_longer(!x) %>%
ggplot(aes(x, value, colour=name)) +
geom_point(alpha = 0.5) +
scale_color_hue(labels = legendlabs) +
labs(x = varlabs[[c]], y = "Entropy", colour = "") +
theme(
axis.title=element_text(size = 20),
axis.text = element_text(size = 20),
legend.position = "top"
)
# ggsave(file.path(FIGDIR, fn),
#        height = 2000,
#        width = 3000,
#        units = "px")
print(g)
}
components <- c("txns_count_spend", "nunique_tag_spend", "std_tag_spend")
for (c in components) {
fn <- glue("smoothing_on_{c}.png")
g <- df %>%
group_by(x = .data[[c]]) %>%
summarise(across(matches("entropy_tag_spend$|entropy_tag_spend_s$"), ~mean(.x))) %>%
ungroup() %>%
filter(ntile(x, 100) <= 95) %>%
pivot_longer(!x) %>%
ggplot(aes(x, value, colour=name)) +
geom_point(alpha = 0.5) +
scale_color_hue(labels = legendlabs) +
labs(x = varlabs[[c]], y = "Entropy", colour = "") +
theme(
axis.title=element_text(size = 20),
axis.text = element_text(size = 20),
legend.position = "top"
)
ggsave(file.path(FIGDIR, fn))
print(g)
}
for (c in components) {
fn <- glue("smoothing_on_{c}.png")
g <- df %>%
group_by(x = .data[[c]]) %>%
summarise(across(matches("entropy_tag_spend$|entropy_tag_spend_s$"), ~mean(.x))) %>%
ungroup() %>%
filter(ntile(x, 100) <= 95) %>%
pivot_longer(!x) %>%
ggplot(aes(x, value, colour=name)) +
geom_point(alpha = 0.5) +
scale_color_hue(labels = legendlabs) +
labs(x = varlabs[[c]], y = "Entropy", colour = "") +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30),
legend.position = "top"
)
ggsave(file.path(FIGDIR, fn))
print(g)
}
for (c in components) {
fn <- glue("smoothing_on_{c}.png")
g <- df %>%
group_by(x = .data[[c]]) %>%
summarise(across(matches("entropy_tag_spend$|entropy_tag_spend_s$"), ~mean(.x))) %>%
ungroup() %>%
filter(ntile(x, 100) <= 95) %>%
pivot_longer(!x) %>%
ggplot(aes(x, value, colour=name)) +
geom_point(alpha = 0.5) +
scale_color_hue(labels = legendlabs) +
labs(x = varlabs[[c]], y = "Entropy", colour = "") +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30),
axis.legend = element_text(size = 30)
legend.position = "top"
for (c in components) {
fn <- glue("smoothing_on_{c}.png")
g <- df %>%
group_by(x = .data[[c]]) %>%
summarise(across(matches("entropy_tag_spend$|entropy_tag_spend_s$"), ~mean(.x))) %>%
ungroup() %>%
filter(ntile(x, 100) <= 95) %>%
pivot_longer(!x) %>%
ggplot(aes(x, value, colour=name)) +
geom_point(alpha = 0.5) +
scale_color_hue(labels = legendlabs) +
labs(x = varlabs[[c]], y = "Entropy", colour = "") +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30),
axis.legend = element_text(size = 30),
legend.position = "top"
)
ggsave(file.path(FIGDIR, fn))
print(g)
}
for (c in components) {
fn <- glue("smoothing_on_{c}.png")
g <- df %>%
group_by(x = .data[[c]]) %>%
summarise(across(matches("entropy_tag_spend$|entropy_tag_spend_s$"), ~mean(.x))) %>%
ungroup() %>%
filter(ntile(x, 100) <= 95) %>%
pivot_longer(!x) %>%
ggplot(aes(x, value, colour=name)) +
geom_point(alpha = 0.5) +
scale_color_hue(labels = legendlabs) +
labs(x = varlabs[[c]], y = "Entropy", colour = "") +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30),
legend.text = element_text(size = 30),
legend.position = "top"
)
ggsave(file.path(FIGDIR, fn))
print(g)
}
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(across(matches("entropy_tag_spend_s$"), ~mean(.x))) %>%
ungroup() %>%
filter(ntile(x, 100) <= 95) %>%
pivot_longer(!x) %>%
ggplot(aes(x, value, colour=name)) +
geom_point(alpha = 0.5)
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(across(matches("entropy_tag_spend_s$"), ~mean(.x)))
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(across(matches("entropy_tag_spend_s$"), ~mean(.x)))
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s))
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
ggplot(aes(x, y)) +
geom_point(alpha = 0.5)
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
ggplot(aes(x, y)) +
geom_point(alpha = 0.1)
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup()
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
sample_frac(0.1)
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
sample_frac(0.1) %>%
ggplot(aes(x, y)) +
geom_point(alpha = 0.1)
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
sample_frac(0.01) %>%
ggplot(aes(x, y)) +
geom_point(alpha = 0.5)
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
sample_frac(0.05) %>%
ggplot(aes(x, y)) +
geom_point(alpha = 0.5)
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
sample_frac(0.05) %>%
ggplot(aes(x, y, colour = y)) +
geom_point(alpha = 0.5)
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
pivot_longer(!x)
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
pivot_longer(!x) %>%
sample_frac(0.05) %>%
ggplot(aes(x, value, colour = name)) +
geom_point(alpha = 0.5)
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
sample_frac(0.05) %>%
ggplot(aes(x, y)) +
geom_point(alpha = 0.5) +
labs(x = varlabs[["entropy_tag_spend"]], y = varlabs[["entropy_tag_spend_s"]]) +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30)
)
fn <- glue("smoothed_unsmoothed_corr.png")
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
sample_frac(0.25) %>%
ggplot(aes(x, y)) +
geom_point(alpha = 0.3) +
labs(x = varlabs[["entropy_tag_spend"]], y = varlabs[["entropy_tag_spend_s"]]) +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30)
)
fn <- glue("smoothed_unsmoothed_corr.png")
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
sample_frac(0.25) %>%
ggplot(aes(x, y)) +
geom_point(alpha = 0.3, colour = palette[[1]]) +
labs(x = varlabs[["entropy_tag_spend"]], y = varlabs[["entropy_tag_spend_s"]]) +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30)
)
fn <- glue("smoothed_unsmoothed_corr.png")
df %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
sample_frac(1) %>%
ggplot(aes(x, y)) +
geom_point(alpha = 0.3, colour = palette[[1]]) +
labs(x = varlabs[["entropy_tag_spend"]], y = varlabs[["entropy_tag_spend_s"]]) +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30)
)
fn <- glue("smoothed_unsmoothed_corr.png")
ggsave(file.path(FIGDIR, fn))
df %>%
sample_frac(0.1) %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup()
df %>%
sample_frac(0.001) %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
ggplot(aes(x, y)) +
geom_point(alpha = 0.3, colour = palette[[1]]) +
labs(x = varlabs[["entropy_tag_spend"]], y = varlabs[["entropy_tag_spend_s"]]) +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30)
)
df %>%
sample_frac(0.01) %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
ggplot(aes(x, y)) +
geom_point(alpha = 0.3, colour = palette[[1]]) +
labs(x = varlabs[["entropy_tag_spend"]], y = varlabs[["entropy_tag_spend_s"]]) +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30)
)
df %>%
sample_frac(0.01) %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
ggplot(aes(x, y)) +
geom_point(alpha = 0.3, colour = palette[[1]]) +
labs(x = varlabs[["entropy_tag_spend"]], y = varlabs[["entropy_tag_spend_s"]], colour = "") +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30)
)
df %>%
sample_frac(0.001) %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
ggplot(aes(x, y)) +
geom_point(alpha = 0.3, colour = palette[[1]]) +
labs(x = varlabs[["entropy_tag_spend"]], y = varlabs[["entropy_tag_spend_s"]], colour = "") +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30)
)
df %>%
sample_frac(0.001) %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
ggplot(aes(x, y)) +
geom_point(alpha = 1, colour = palette[[1]]) +
labs(x = varlabs[["entropy_tag_spend"]], y = varlabs[["entropy_tag_spend_s"]], colour = "") +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30)
)
df %>%
sample_frac(0.001) %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
pivot_longer(!x) %>%
ggplot(aes(x, y)) +
geom_point(alpha = 1, colour = palette[[1]]) +
labs(x = varlabs[["entropy_tag_spend"]], y = varlabs[["entropy_tag_spend_s"]], colour = "") +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30)
)
df %>%
sample_frac(0.001) %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
pivot_longer(!x) %>%
ggplot(aes(x, value)) +
geom_point(alpha = 1, colour = palette[[1]]) +
labs(x = varlabs[["entropy_tag_spend"]], y = varlabs[["entropy_tag_spend_s"]], colour = "") +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30)
)
df %>%
sample_frac(0.001) %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
pivot_longer(!x) %>%
ggplot(aes(x, value, colour = name)) +
geom_point(alpha = 1, colour = palette[[1]]) +
labs(x = varlabs[["entropy_tag_spend"]], y = varlabs[["entropy_tag_spend_s"]], colour = "") +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30)
)
df %>%
sample_frac(0.001) %>%
group_by(x = entropy_tag_spend) %>%
summarise(y = mean(entropy_tag_spend_s)) %>%
ungroup() %>%
pivot_longer(!x) %>%
ggplot(aes(x, value, colour = name)) +
geom_point(alpha = 1, colour = palette[[1]]) +
scale_color_hue(labels = legendlabs) +
labs(x = varlabs[["entropy_tag_spend"]], y = varlabs[["entropy_tag_spend_s"]], colour = "") +
theme(
axis.title=element_text(size = 30),
axis.text = element_text(size = 30)
)
df %>%
sample_frac(0.001) %>%
select(entropy_tag_spend, entropy_tag_spend_s, nunique_tag_spend)
df %>%
sample_frac(0.001) %>%
select(x = entropy_tag_spend, y = entropy_tag_spend_s, c= nunique_tag_spend) %>%
ggplot(aes(x, y))
df %>%
sample_frac(0.001) %>%
select(x = entropy_tag_spend, y = entropy_tag_spend_s, c= nunique_tag_spend) %>%
ggplot(aes(x, y)) +
geom_point()
df %>%
sample_frac(0.001) %>%
select(x = entropy_tag_spend, y = entropy_tag_spend_s, c= nunique_tag_spend) %>%
ggplot(aes(x, y, colour = c)) +
geom_point()
df %>%
sample_frac(0.01) %>%
select(x = entropy_tag_spend, y = entropy_tag_spend_s, c= nunique_tag_spend) %>%
ggplot(aes(x, y, colour = c)) +
geom_point()
df %>%
sample_frac(0.1) %>%
select(x = entropy_tag_spend, y = entropy_tag_spend_s, c= nunique_tag_spend) %>%
ggplot(aes(x, y, colour = c)) +
geom_point()
df %>%
sample_frac(0.1) %>%
select(x = entropy_tag_spend, y = entropy_tag_spend_s, c= std_tag_spend) %>%
ggplot(aes(x, y, colour = c)) +
geom_point()
df %>%
sample_frac(0.1) %>%
select(x = entropy_tag_spend, y = entropy_tag_spend_s, c= txns_count_spend) %>%
ggplot(aes(x, y, colour = c)) +
geom_point()
df %>%
sample_frac(0.1) %>%
select(x = entropy_tag_spend, y = entropy_tag_spend_s, c= nunique_tag_spend) %>%
ggplot(aes(x, y, colour = c)) +
geom_point()
df %>%
sample_frac(0.01) %>%
select(x = entropy_tag_spend, y = entropy_tag_spend_s, c= nunique_tag_spend) %>%
ggplot(aes(x, y, colour = c)) +
geom_point()
df %>%
sample_frac(0.05) %>%
select(x = entropy_tag_spend, y = entropy_tag_spend_s, c= nunique_tag_spend) %>%
ggplot(aes(x, y, colour = c)) +
geom_point()
df %>%
sample_frac(0.05) %>%
select(x = entropy_tag_spend, y = entropy_tag_spend_s, c= nunique_tag_spend) %>%
ggplot(aes(x, y, colour = c)) +
geom_point()
df %>%
sample_frac(0.05) %>%
select(x = entropy_tag_spend, y = entropy_tag_spend_s, c= nunique_tag_spend) %>%
ggplot(aes(x, y, colour = c)) +
geom_point() +
facet_wrap(~c)
df %>%
sample_frac(0.05) %>%
select(x = entropy_tag, y = entropy_tag_s, nunique_tag, txns_count) %>%
ggplot(aes(x, y, colour = txns_count)) +
geom_point() +
facet_wrap(~nunique_tag)
df %>%
sample_frac(0.05) %>%
select(x = entropy_tag, y = entropy_tag_s, nunique_tag, txns_count) %>%
ggplot(aes(x, y, colour = factor(txns_count))) +
geom_point() +
facet_wrap(~nunique_tag)
# from here - can we make sense of this intuitively?
df %>%
sample_frac(0.05) %>%
select(x = entropy_tag, y = entropy_tag_s, nunique_tag, txns_count) %>%
ggplot(aes(x, y, colour = factor(txns_count))) +
geom_point() +
facet_wrap(~nunique_tag) +
theme(
legend.position = NA
)

% !TEX root = ../entropy.tex

\section{Methods}%
\label{sec:methods}


\paragraph{Dataset description}
\label{par:dataset_description}

We use data from Money Dashboard (MDB), a financial management app that allows
its users to link accounts from different banks to obtain an integrated view of
their
finances.\footnote{\href{https://www.moneydashboard.com}{https://www.moneydashboard.com}.}
The dataset contains more than 500 million transactions made between 2012 and
June 2020 by about 250,000 users, and provides information such as date,
amount, and description about the transaction as well as account and user-level
information.

The main advantages of the data for the study of consumer financial behaviour
are its high frequency, that it is automatically collected and updated and thus
less prone to errors and unaffected by biases that bedevil survey measures, and
that it offers a view of consumers' entire financial life across all their
accounts, rather than just a view of their accounts held at a single bank,
provided they added all their accounts to MDB. The main limitation is the
non-representativeness of the sample relative to the population as a whole.
Financial management apps are known to be used disproportionally by men,
younger people, and people of higher socioeconomic status
\citep{carlin2019generational}. Also, as pointed out in
\citet{gelman2014harnessing}, a willingness to share financial information with
a third party might not only select on demographic characteristics, but also
for an increased need for financial management or a higher degree of financial
sophistication. Because our analysis does not rely on representativeness, we do
not address this.\footnote{For an example of how re-weighing can be used to
mitigate the non-representative issue, see \citet{bourquin2020effects}.}


\paragraph{Preprocessing and sample selection}%
\label{par:preprocessing_and_sample_selection}

We restrict our sample to users for whom we can observe a regular income, can
be reasonably sure that they have added all their bank account to MDB, and for
whom we observe at least six months of data. Table~\ref{tab:selection}
summarises the sample selection steps we applied to a 1 percent sample of the
raw data, associated data losses, and the size of our final sample. A detailed
description of the entire data cleaning and selection process is provided in
Appendix~\ref{sec:data}.

\begin{table}[H]
\caption{Sample selection}\label{tab:selection}
\input{\tabdir/sample_selection_XX7.tex}
\end{table}

\paragraph{Variable description}%
\label{par:dependent_variable}

\paragraph{Outcome variable:}%
\label{par:outcome_variable_}
Our outcome variable is a binary indicator for whether or not a user has made
any payments into their savings accounts in a given month. We classify as
payments into savings accounts all savings account credits of \pounds5 or more
that are not identified as interest payments or automated "save the change"
transfers. While standing order transactions are unlikely to be related to
entropy in the short-run, we do not exclude such transactions since, best we
can tell, the only account for a small fraction of total transactions.


\citet{mps2018building} finds that saving habit is often more important than
amount saved. On individual level, has saving habit dummy as outcome. Could
also use 12-month rolling window.





\paragraph{Variable of interest:}%
\label{par:variable_of_interest_}
Our variable of interest is spending entropy, a measure of how predictable an
individual's spending pattern is at a given point in time, which we interpret
more broadly as a measure of the degree to which an individual's life is
chaotic. Entropy is a cornerstone of information theory, where it measures the
amount of information contained in an event. In the behavioural sciences,
behavioural entropy has recently been shown to predict the frequency of grocery
visits and the per-capita spend per visit \citep{guidotti2015behavioral}, the
amount of calories consumed \citep{skatova2019those}, and the propensity for
financial distress \citep{muggleton2020evidence}.

We calculate spending entropy using the formula proposed by
\citet{shannon1948mathematical}, which defines entropy as:\footnote{Shannon
    entropy is customarily denoted as $H$ following Shannon's own naming after
    Ludwig Boltzman's 1872 H-theorem in statistical mechanics, to which it is
analagous.}

\begin{equation}
\label{equ:entropy}
    H = -\sum{p_i}log(p_i),
\end{equation}

where $p_i$ is the probability that an individual makes a purchase in spending
category $i$, and $log$ is the base 2 logarithm.

\edit{We normalise $H$ by $log(N_{SC})$, the entropy of completely random shopping
    behaviour, so that it takes value between 0 and 1.\footnote{$log(N_{SC})$ is
    the probability of a completely random shopping pattern because for in this
case, for $N_{SC}$ different spending categories, we would have $p_i = 1 /
N_{SC}$ for each category $i$ so that $H = -N_{SC}p_ilog(p_i) = -log(p_i) =
log(N_{SC})$.}}

The higher the value of
entropy, the less predictable an individuals spending pattern.

To calculate entropy scores, we group spending into 9 spending categories (SC)
based on the classification used by Lloyds Banking Group as discussed in
\citet{muggleton2020evidence}. Also following that paper, we use additive
smoothing to calcualte probabilities to avoid taking logs of zeroes in cases
where an individual makes no purchases in a given spending category. We thus calculate $p_i$ as: 

\begin{equation}
    p_i = \frac{\text{Count of purchases in $SC_i$} + 1}{\text{Count of
    all purchases} + N_{SC}},
\end{equation}

where $N_{SC}$ is the total number of categories.

Figure~\ref{fig:entropy} shows the distribution of spending entropy as well as
the distributions of the number of spend transactions, the number of distinct
categories within which these transactions fall, and the proportion of
transactions in each category.

\begin{figure}[H]
    \center \newcommand\width{\textwidth} \caption{Transactions distributions}
    \label{fig:entropy}
    % \includegraphics[width=\width]{\figdir/txns_breakdowns_and_entropy.png}
    \includegraphics[width=\width]{\figdir/entropy_hists.png}
    \fignote{\width}{From top-left to bottom-right: distribution of spending
    transactions per user-month, breakdown of spending transactions into
spending categories; breakdown of number of spending categories spent on in
user-month; distribution of user-month entropy scores.}
\end{figure}



\paragraph{Shopping-time based entropy}%
\label{par:shopping_time_based_entropy}

We calculate entropy based on the probability of $(day of week, merchant)$
tuples, where we follow \citet{guidotti2015behavioral} and bin \textit{day of
week} into \textit{weekends} and \textit{weekday}, to reduce excessive
fluctuations. Because banks tend to process weekend transactions on Monday, as shows in
Figure~\ref{fig:dow_txns}, we cannot distinguish transactions made on Saturdays
or Sundays from those made on Mondays, and thus classify all of them as weekend
transactions.

\begin{figure}[H]
    \center \newcommand\width{.7\textwidth} \caption{Transactions by day of week}
    \label{fig:dow_txns}
    \includegraphics[width=\width]{\figdir/dow_txns.png}
    \fignote{\width}{Number of transactions by day of week, based on a 1/1000
    sample of the full data. Shows that banks process most weekend
transactions on Mondays.}
\end{figure}


\paragraph{Control variables}%
\label{par:control_variables}

We classify potential determinants of savings behaviour into \textit{financial behaviours},
\textit{financial planning}, and \textit{individual or household
characteristics}, a classification frequently used in policy research on
the financial wellbeing \citep{can2019improving,cfpb2017financial, mps2018building}.





Financial behaviour


\begin{itemize}
    \item Regular savings, dummy for 10 out of last 12 months

    \item Share of spend with credit

    \item Month total and category spend
\end{itemize}

Planning
\begin{itemize}
    \item Regular login, dummy for 1 / month in 10 out of last 12 months
\end{itemize}

Individual and household characteristics
\begin{itemize}
    \item Gender

    \item Age

    \item Urban

    \item Region

    \item Month income

    \item Regular income, dummy for 10 out of last 12 months

    \item Income current month, dummy for month income > 0

    \item Has children, imperfect

    \item Received benefits

    \item Receives pension

    \item Housing tenure: mortgage, rent, other (owning outright implied)

    \item Takes out (payday) loan

    \item Total balance

    \item Balance / average monthly spend
\end{itemize}







\paragraph{Summary statistics}%
\label{par:summary_statistics}
% \begin{table}[H]
% \caption{Summary statistics}\label{tab:sumstats}
% \input{\tabdir/sumstats.tex}
% \end{table}

\paragraph{Model specification}%
\label{par:model_specification}

We estimate models of the form: 

\begin{equation}
    s_{i,t} = \alpha_i + \lambda_t + \beta H_{i,t} + x^\prime_{i,t} \delta +
    \epsilon_{i,t},
\end{equation}

where $s_{i,t}$ is an indicator variable equal to one if individual $i$ made
one or more transfers to any of their savings account in month $t$ and zero
otherwise, $H_{it}$ is $i$'s spending entropy in month $t$,
$x_{i,t}$ a vector of control variables, $\alpha_i$ an individual fixed effect, $\lambda_t$ a calendar
month fixed effect, and $\epsilon_{i, t}$ the error term.

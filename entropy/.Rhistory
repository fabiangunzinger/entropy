)
setFixest_fml(
..entropy = 'entropy_tag_sst'
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~ ..entropy + ..controls | csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
dt
entropy <- 'entropy_tag'
dt$entropy
dt${entropy}
dt[entropy]
dt[[entropy]]
dt$entropy_tag
summary(dt[[entropy]])
dt[[entropy]]
dt[, .(g_mean = mean(entropy_tag), g_std = std(entropy_tag)), user_id]
dt[, .(g_mean = mean(entropy_tag), g_std = mean(entropy_tag)), user_id]
dt[, .(g_mean = mean(entropy_tag), g_std = sd(entropy_tag)), user_id]
dt[, .(g_mean = mean(entropy_tag), g_sd = sd(entropy_tag)), user_id]
summary(dt[, .(g_mean = mean(entropy_tag), g_sd = sd(entropy_tag)), user_id])
dt[, .(g_mean = mean(entropy_tag), g_sd = sd(entropy_tag)), user_id]
entropy <- 'entropy_tag'
dt[[entropy]]
agg = dt[, .(g_mean = mean(entropy_tag), g_sd = sd(entropy_tag)), user_id]
within_var = mean(a$g_sd)
between_var = sd(a$g_mean)
total_var = sd(dt[[entropy]])
print(total_var)
a = dt[, .(g_mean = mean(entropy_tag), g_sd = sd(entropy_tag)), user_id]
within_var = mean(a$g_sd)
between_var = sd(a$g_mean)
total_var = sd(dt[[entropy]])
print(total_var)
print(total_var)
print(within_var)
print(between_var)
print(within_var / between_var)
a = dt[, .(g_mean = mean(..entropy), g_sd = sd(..entropy)), user_id]
entropy <- 'entropy_tag'
a = dt[, .(g_mean = mean(..entropy), g_sd = sd(..entropy)), user_id]
entropy <- c('entropy_tag')
a = dt[, .(g_mean = mean(..entropy), g_sd = sd(..entropy)), user_id]
entropy <- 'entropy_tag'
entropy <- 'entropy_tag'
a = dt[, .(g_mean = mean(..entropy), g_sd = sd(..entropy)), user_id]
dt[, ..entropy]
dt[, mean(..entropy)]
dt[, mean('entropy_tag')]
dt[, mean('entropy_tag')]
a = dt[, .(g_mean = mean(..entropy), g_sd = sd(..entropy)), user_id]
a = dt[, .(g_mean = mean('entropy_tag'), g_sd = sd('entropy_tag')), user_id]
a = dt[, .(g_mean = mean('entropy_tag'), g_sd = sd('entropy_tag')), user_id]
a = dt[, .(g_mean = mean(entropy_tag), g_sd = sd(entropy_tag)), user_id]
entropy <- entropy_tag
entropy <- entropy_tag
a = dt[, .(g_mean = mean(entropy_tag), g_sd = sd(entropy_tag)), user_id]
within_var = mean(a$g_sd)
between_var = sd(a$g_mean)
total_var = sd(dt[[entropy]])
print(total_var)
print(within_var)
print(between_var)
print(within_var / between_var)
print(within_var, between_var)
print(within_var, between_var)
entropy <- entropy_tag
a = dt[, .(g_mean = mean(entropy_tag), g_sd = sd(entropy_tag)), user_id]
within_var = mean(a$g_sd)
between_var = sd(a$g_mean)
total_var = sd(dt[[entropy]])
print(total_var)
print(within_var, between_var)
print(between_var)
print(within_var / between_var)
setFixest_fml(
..entropy = 'entropy_tag_sst'
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~ ..entropy + ..controls | csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
setFixest_fml(
..entropy = 'entropy_tag_st'
)
within_var = mean(a$g_sd)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~ ..entropy + ..controls | csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
# Controls added cumulatively
etable(
fixest::feols(has_sa_inflows ~ ..entropy + csw0(
# fin behaviour
has_reg_sa_inflows,
prop_credit,
month_spend,
# planning (not yet implemented)
# hh characteristics
is_urban,
month_income,
has_regular_income,
has_month_income,
loan_repmt,
pdloan_repmt
) | user_id + month, data=dt, vcov = 'cluster'),
title = 'Controls included cumulatively',
# tex = T,
# file=file.path(TABDIR, 'reg_csw0.tex'),
fontsize = 'tiny',
label = 'tab:reg_csw0',
replace = T
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~ ..entropy + ..controls | csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
# Controls added one-by-one
etable(
fixest::feols(has_sa_inflows ~ ..entropy + entropy_tag_sst+ sw0(
# fin behaviour
has_reg_sa_inflows,
prop_credit,
month_spend,
# planning (not yet implemented)
# hh characteristics
is_urban,
month_income,
has_regular_income,
has_month_income,
loan_repmt,
pdloan_repmt
) | user_id + month, data=dt, vcov = 'cluster'),
title = 'Controls included one-by-one',
# tex = T,
# file=file.path(TABDIR, 'reg_sw0.tex'),
fontsize = 'tiny',
label = 'tab:reg_sw0',
replace = T
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~ ..entropy + ..controls + entropy_tag_sst | csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
setwd('~/dev/projects/entropy/entropy/analysis')
source('helpers.R')
library(data.table)
library(estimatr)
library(fixest)
library(modelsummary)
library(plm)
library(purrr)
library(stargazer)
# Load data ------------------------------------------------------------------------
dt = read_analysis_data()
names(dt)
TABDIR = '/Users/fgu/dev/projects/entropy/output/tables'
# set fontsize of latex table produced by etable
set_font = function(x, fontsize){
if(missing(fontsize)) return(x)
dreamerr::check_arg_plus(fontsize, "match(tiny, scriptsize, footnotesize, small, normalsize, large, Large)")
x[x == "%start:tab\n"] = paste0("\\begin{", fontsize, "}")
x[x == "%end:tab\n"] = paste0("\\end{", fontsize, "}")
return(x)
}
setFixest_etable(postprocess.tex = set_font)
setFixest_dict(c(
# entropy = "Entropy",
has_reg_sa_inflows = "Regular savings"
))
setFixest_etable(
se.below = T,
style.tex = style.tex(
"base"
)
)
# Variables
fin_behav = c(
'has_reg_sa_inflows',
'prop_credit',
'month_spend'
)
planning = c()
hh_chars = c(
'is_urban',
'month_income',
'has_regular_income',
'has_month_income',
'loan_repmt',
'pdloan_repmt'
)
controls = c(fin_behav, planning, hh_chars)
setFixest_fml(
..entropy = 'entropy_tag_st'
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~ ..entropy
+ ..controls
+ entropy_tag_sst | csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~ ..entropy
+ entropy_tag_sst
+ ..controls
| csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~
+ entropy_tag_auto_st
+ entropy_tag_auto_sst
+ ..controls
| csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~
+ entropy_tag_auto_wst
+ entropy_tag_auto_wsst
+ ..controls
| csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~
+ entropy_tag_wst
+ entropy_tag_wsst
+ ..controls
| csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~
+ entropy_tag_st
+ entropy_tag_sst
+ ..controls
| csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~
+ entropy_tag_st
+ entropy_tag_sst
+ ..controls
| csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~
+ entropy_tag_wst
+ entropy_tag_wsst
+ ..controls
| csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~
+ entropy_tag_st
+ entropy_tag_sst
+ ..controls
| csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~
+ ..entropy
+ ..controls
| csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
setFixest_fml(
..entropy = c('entropy_tag_st', 'entropy_tag_sst')
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~
+ ..entropy
+ ..controls
| csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
# Controls added one-by-one
etable(
fixest::feols(has_sa_inflows ~ ..entropy + sw0(
# fin behaviour
has_reg_sa_inflows,
prop_credit,
month_spend,
# planning (not yet implemented)
# hh characteristics
is_urban,
month_income,
has_regular_income,
has_month_income,
loan_repmt,
pdloan_repmt
) | user_id + month, data=dt, vcov = 'cluster'),
title = 'Controls included one-by-one',
# tex = T,
# file=file.path(TABDIR, 'reg_sw0.tex'),
fontsize = 'tiny',
label = 'tab:reg_sw0',
replace = T
)
setFixest_fml(
..entropy = c('entropy_tag_sst', 'entropy_tag_st')
)
# FE specifications
etable(
fixest::feols(xpd(
has_sa_inflows ~ + ..entropy + ..controls | csw0(user_id, month),
..controls = controls), data=dt
),
title = 'FE specifications',
# tex = T,
fontsize = 'tiny',
label = 'tab:reg_fe',
# file=file.path(TABDIR, 'reg_sw0.tex'),
replace = T
)
# Controls added one-by-one
etable(
fixest::feols(has_sa_inflows ~ ..entropy + sw0(
# fin behaviour
has_reg_sa_inflows,
prop_credit,
month_spend,
# planning (not yet implemented)
# hh characteristics
is_urban,
month_income,
has_regular_income,
has_month_income,
loan_repmt,
pdloan_repmt
) | user_id + month, data=dt, vcov = 'cluster'),
title = 'Controls included one-by-one',
# tex = T,
# file=file.path(TABDIR, 'reg_sw0.tex'),
fontsize = 'tiny',
label = 'tab:reg_sw0',
replace = T
)
# Controls added cumulatively
etable(
fixest::feols(has_sa_inflows ~ ..entropy + csw0(
# fin behaviour
has_reg_sa_inflows,
prop_credit,
month_spend,
# planning (not yet implemented)
# hh characteristics
is_urban,
month_income,
has_regular_income,
has_month_income,
loan_repmt,
pdloan_repmt
) | user_id + month, data=dt, vcov = 'cluster'),
title = 'Controls included cumulatively',
# tex = T,
# file=file.path(TABDIR, 'reg_csw0.tex'),
fontsize = 'tiny',
label = 'tab:reg_csw0',
replace = T
)

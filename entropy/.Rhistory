sw(
entropy_tag_size,
entropy_tag_size_n,
entropy_tag_size_sn,
entropy_tag_size_s,
entropy_tag_sum,
entropy_tag_sum_n,
entropy_tag_sum_sn,
entropy_tag_sum_s
)
+ nunique_tag
+ txn_count_ca
+ ..controls | csw0(user_id, ym),
..endog = endog,
..controls = controls,
..exog = exog
),
data=dt
),
# title = 'FE specifications',
order = c('entroyp', '!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
etable(
fixest::feols(
xpd(
..endog ~
sw(
entropy_tag_size,
entropy_tag_size_n,
entropy_tag_size_sn,
entropy_tag_size_s,
entropy_tag_sum,
entropy_tag_sum_n,
entropy_tag_sum_sn,
entropy_tag_sum_s
)
+ nunique_tag
+ txn_count_ca
+ ..controls | csw0(user_id, ym),
..endog = endog,
..controls = controls,
..exog = exog
),
data=dt
),
# title = 'FE specifications',
order = c('entropy', '!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
etable(
fixest::feols(
xpd(
..endog ~
sw(
entropy_tag_size,
entropy_tag_size_n,
entropy_tag_size_sn,
entropy_tag_size_s,
entropy_tag_sum,
entropy_tag_sum_n,
entropy_tag_sum_sn,
entropy_tag_sum_s
)
+ nunique_tag
+ txn_count_ca
+ ..controls | user_id + ym,
..endog = endog,
..controls = controls,
..exog = exog
),
data=dt
),
# title = 'FE specifications',
order = c('entropy', '!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
etable(
fixest::feols(
xpd(
..endog ~
sw(
entropy_tag_size,
entropy_tag_size_n,
entropy_tag_size_sn,
entropy_tag_size_s,
entropy_tag_sum,
entropy_tag_sum_n,
entropy_tag_sum_sn,
entropy_tag_sum_s
)
+ ..controls | user_id + ym,
..endog = endog,
..controls = controls,
..exog = exog
),
data=dt
),
# title = 'FE specifications',
order = c('entropy', '!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
etable(
fixest::feols(
xpd(
..endog ~
sw(
entropy_tag_size,
entropy_tag_size_n,
entropy_tag_size_s,
entropy_tag_size_sn,
entropy_tag_sum,
entropy_tag_sum_n,
entropy_tag_sum_s,
entropy_tag_sum_sn
)
+ ..controls | user_id + ym,
..endog = endog,
..controls = controls,
..exog = exog
),
data=dt
),
# title = 'FE specifications',
order = c('entropy', '!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
dt = read_analysis_data()
names(dt)
etable(
fixest::feols(
xpd(
..endog ~
sw(
entropy_tag_size_z,
entropy_tag_size_sz,
entropy_tag_sum_z,
entropy_tag_sum_sz,
# entropy_tag_size_n,
#
# entropy_tag_size_sn,
# entropy_tag_sum,
# entropy_tag_sum_n,
# entropy_tag_sum_s,
# entropy_tag_sum_sn
)
+ ..controls | user_id + ym,
..endog = endog,
..controls = controls,
..exog = exog
),
data=dt
),
# title = 'FE specifications',
order = c('entropy', '!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
# Include simple variables
etable(
fixest::feols(
xpd(
..endog ~ entropy_tag_z
+ nunique_tag
+ ..controls | csw0(user_id, ym),
..endog = endog,
..controls = controls,
..exog = exog
),
data=dt
),
# title = 'FE specifications',
order = c('!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
dt = read_analysis_data()
names(dt)
# Include simple variables
etable(
fixest::feols(
xpd(
..endog ~ entropy_tag_size_z
+ nunique_tag
+ ..controls | csw0(user_id, ym),
..endog = endog,
..controls = controls,
..exog = exog
),
data=dt
),
# title = 'FE specifications',
order = c('!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
# Include simple variables
etable(
fixest::feols(
xpd(
..endog ~ entropy_tag_size
+ nunique_tag
+ ..controls | csw0(user_id, ym),
..endog = endog,
..controls = controls,
..exog = exog
),
data=dt
),
# title = 'FE specifications',
order = c('!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
csw0(
# Include simple variables
etable(
fixest::feols(
xpd(
has_od_fees ~ entropy_tag_size
+ nunique_tag
+ ..controls | csw0(user_id, ym),
..endog = endog,
..controls = controls,
..exog = exog
),
data=dt
),
# title = 'FE specifications',
order = c('!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
# Include simple variables
etable(
fixest::feols(
xpd(
has_od_fees ~ entropy_tag_size
+ nunique_tag
+ ..controls | csw0(user_id, ym),
..endog = endog,
..controls = controls,
..exog = exog
),
data=dt
),
# title = 'FE specifications',
order = c('!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
dt = read_analysis_data()
names(dt)
# Entropy with num-zero count
etable(
fixest::feols(
xpd(
has_od_fees ~ entropy_tag_size
+ nunique_tag
+ ..controls | csw0(user_id, ym),
..endog = endog,
..controls = controls,
..exog = exog
),
data=dt
),
# title = 'FE specifications',
order = c('!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
# Entropy with num-zero count
etable(
fixest::feols(xpd(has_od_fees ~ sw(entropy_tag_size, nunique_tag) + ..controls  | csw0(user_id, ym), ..endog = endog, ..controls = controls, ..exog = exog), data=dt),
# title = 'FE specifications',
order = c('!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
# Entropy with num-zero count
etable(
fixest::feols(xpd(has_od_fees ~ sw(entropy_tag_size, nunique_tag) + ..controls  | user_id + ym, ..endog = endog, ..controls = controls, ..exog = exog), data=dt),
# title = 'FE specifications',
order = c('!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
# Entropy with num-zero count
etable(
fixest::feols(xpd(has_od_fees ~ csw(entropy_tag_size, nunique_tag) + ..controls  | user_id + ym, ..endog = endog, ..controls = controls, ..exog = exog), data=dt),
# title = 'FE specifications',
order = c('!(Intercept)')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
# Entropy with num-zero count
etable(
fixest::feols(xpd(has_od_fees ~ csw(entropy_tag_size, nunique_tag) + ..controls  | user_id + ym, ..endog = endog, ..controls = controls, ..exog = exog), data=dt),
# title = 'FE specifications',
order = c('entropy', 'nunique')
# tex = T,
# file=file.path(TABDIR, 'reg_entropy_savings_fe.tex'),
# fontsize = 'footnotesize',
# label = 'tab:reg_entropy_savings_fe',
# replace = T
)
---
title: "Entropy exploration"
author: "Fabian Gunzinger"
date: "16/03/2022"
output: html_document
editor_options:
chunk_output_type: console
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
setwd('~/dev/projects/entropy/entropy/analysis')
source('helpers.R')
library(ggplot2)
library(lubridate)
library(patchwork)
FIGDIR = '/Users/fgu/dev/projects/entropy/output/figures'
# load data
dt = read_analysis_data('X77')
```
# load data
dt = read_analysis_data('XX7')
# load data
dt = read_analysis_data('X77')
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
setwd('~/dev/projects/entropy/entropy/analysis')
source('helpers.R')
library(data.table)
library(estimatr)
library(glue)
library(fixest)
library(modelsummary)
library(plm)
library(purrr)
library(stargazer)
# Settings -------------------------------------------------------------------------
TABDIR = '/Users/fgu/dev/projects/entropy/output/tables'
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
setwd('~/dev/projects/entropy/entropy/analysis')
source('helpers.R')
library(data.table)
library(estimatr)
library(glue)
library(fixest)
library(modelsummary)
library(plm)
library(purrr)
library(stargazer)
# Settings -------------------------------------------------------------------------
TABDIR = '/Users/fgu/dev/projects/entropy/output/tables'
# set fontsize of latex table produced by etable
set_font = function(x, fontsize){
if(missing(fontsize)) return(x)
dreamerr::check_arg_plus(fontsize, "match(tiny, scriptsize, footnotesize, small, normalsize, large, Large)")
x[x == "%start:tab\n"] = paste0("\\begin{", fontsize, "}")
x[x == "%end:tab\n"] = paste0("\\end{", fontsize, "}")
return(x)
}
setFixest_etable(postprocess.tex = set_font)
setFixest_etable(
se.below = T,
style.tex = style.tex(
"base"
)
)
setFixest_dict(c(
has_reg_sa_inflows = "Regular savings",
entropy_tag_z = "Entropy (tag-based)",
entropy_tag_sz = "Entropy (tag-based, smooth)",
entropy_tag_auto_z = "Entropy (auto-tag-based)",
entropy_tag_auto_sz = "Entropy (auto-tag-based, smooth)",
entropy_merchant_z = "Entropy (merchant-based)",
entropy_merchant_sz = "Entropy (merchant-based, smooth)",
spend_communication = 'Spend communication',
spend_finance = 'Spend finance',
spend_hobbies = 'Spend hobbies',
spend_household = 'Spend household',
spend_other_spend = 'Spend other',
spend_motor = 'Spend motor',
spend_retail = 'Spend retail',
spend_services = 'Spend services',
spend_travel = 'Spend travel',
prop_credit = 'Credit spend',
month_spend = 'Month spend',
is_urban = 'Urban',
is_female = 'Female',
age = 'Age',
year_income = 'Year income',
month_income = 'Month income (\'000)',
has_regular_income = 'Regular income',
has_month_income = 'Has income in month',
has_loan_repmt = 'Loan repayment',
user_id = 'User id',
ym = 'Calendar month'
))
# Load data ------------------------------------------------------------------------
dt = read_analysis_data()
names(dt)
dt = read_analysis_data()
names(dt)
setwd('~/dev/projects/entropy/entropy/analysis')
source('helpers.R')
library(stargazer)
TABDIR = '/Users/fgu/dev/projects/entropy/output/tables'
SAMPLE = '777'
dt = read_txn_data()
head(dt)
stargazer(
dt,
type = 'text'
# out = file.path(TABDIR, 'sumstats.tex')
)
dt = read_analysis_data()
head(dt)
stargazer(
dt,
type = 'text'
# out = file.path(TABDIR, 'sumstats.tex')
)
stargazer(
dt,
type = 'text'
out = file.path(TABDIR, 'sumstats.tex')
)
stargazer(
dt,
# type = 'text',
out = file.path(TABDIR, 'sumstats.tex')
)
stargazer(
dt,
# type = 'text',
label = 'tab:sumstats',
out = file.path(TABDIR, 'sumstats.tex')
)
stargazer(
dt,
# type = 'text',
title = 'Summary statistics',
label = 'tab:sumstats',
out = file.path(TABDIR, 'sumstats.tex')
)
stargazer(
dt,
# type = 'text',
title = 'Summary statistics',
label = 'tab:sumstats',
font.size = 'scriptsize',
out = file.path(TABDIR, 'sumstats.tex')
)
stargazer(
dt,
title = 'Summary statistics',
label = 'tab:sumstats',
font.size = 'scriptsize',
out = file.path(TABDIR, 'sumstats.tex')
)

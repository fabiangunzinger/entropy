library(wesanderson)
source('helpers.R')
setwd('~/dev/projects/entropy/entropy/analysis')
dt <- read_analysis_data('X77')
ggplot(dt, aes(year_income, generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Darjeeling2"))
ggplot(dt, aes(year_income, generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Darjeeling2"))
ggplot(dt, aes(year_income, generation)) +
geom_density_ridges() +
scale_fill_manual(values = wes_palette("Darjeeling2"))
scale = 3
ggplot(dt, aes(year_income, generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Darjeeling2"))
ggplot(dt, aes(year_income, generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Darjeeling2", n=5))
ggplot(dt, aes(year_income, generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Darjeeling2"))
wes_palette('Zissou1')
ggplot(dt, aes(year_income, generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1"))
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1"))
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1")) +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1")) +
labs(
x = "Annual income (in £'000)"
)
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1")) +
labs(
x = "Annual income (in £'000)",
y = ""
)
theme_few()
library(ggthemes)
install.packages('ggthemes')
library(ggthemes)
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1")) +
labs(
x = "Annual income (in £'000)",
y = ""
)
library(ggdist)
library(ggplot2)
library(ggridges)
library(ggthemes)
library(hrbrthemes)
library(lubridate)
library(patchwork)
library(plyr)
library(stringr)
library(wesanderson)
source('helpers.R')
setwd('~/dev/projects/entropy/entropy/analysis')
dt <- read_analysis_data('X77')
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1")) +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_few()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_few()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(scale = 2) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_few()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(scale = 2) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_ipsum()
dt <- read_analysis_data()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(scale = 2) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_few()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_ipsum_gs()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_ipsum_rc()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_ipsum_ps()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 3) +
# scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
scale_color_ipsum() +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_few()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 3) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = "",
caption = 'This is that.'
) +
theme_ipsum()
cap <- "This is a very long string that, in a lot of detail, explains exactly what's going on in the figure. Maybe it's even a bit too much detail, but it's for testing, afer all."
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = "",
caption = cap
) +
theme_ipsum()
cap <- "This is a very long string that, in a lot of detail, explains exactly what's going on in the figure." "Maybe it's even a bit too much detail, but it's for testing, afer all."
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = ""
) +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_tufte()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Darjeeling1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Darjeeling2"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Darjeeling1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Zissu1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Zissu"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Zissou2"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ipsum()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_y_discrete(expand = c(0, 0)) +     # will generally have to set the `expand` option
scale_x_continuous(expand = c(0, 0)) +   # for both axes to remove unneeded padding
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
# scale_y_discrete(expand = c(0, 0)) +     # will generally have to set the `expand` option
scale_x_continuous(expand = c(0, 0)) +   # for both axes to remove unneeded padding
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
# scale_y_discrete(expand = c(0, 0)) +     # will generally have to set the `expand` option
# scale_x_continuous(expand = c(0, 0)) +   # for both axes to remove unneeded padding
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_y_discrete(expand = c(0, 0)) +     # will generally have to set the `expand` option
# scale_x_continuous(expand = c(0, 0)) +   # for both axes to remove unneeded padding
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_y_discrete(expand = c(0, 0)) +     # will generally have to set the `expand` option
scale_x_continuous(expand = c(0, 0)) +   # for both axes to remove unneeded padding
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges2(alpha = .8, scale = 4) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, rel_min_height = 0.01) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, rel_min_height = 0.05) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, rel_min_height = 0.025) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, rel_min_height = 0.001) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, rel_min_height = 0.005) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, rel_min_height = 0.01) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, quantile_lines = T, quantiles = 2) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, quantile_lines = T, quantiles = 2, jitter_points = T) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, quantile_lines = T, quantiles = 2, jittered_points = T) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, quantile_lines = T, quantiles = 2) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges()
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, quantile_lines = T, quantiles = 2) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges(grid = F)
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, quantile_lines = T, quantiles = 2) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges(grid = T)
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, quantile_lines = T, quantiles = 2) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(x = "Annual income (in £'000)", y = "") +
theme_ridges(grid = T, center_axis_labels = T)
x = "Annual income (in £'000)",
y = "") +
theme_ridges(grid = T, center_axis_labels = T)
x = "Annual income (in £'000)",
y = "") +
theme_ridges(grid = T, center_axis_labels = T)
x = "Annual income (in £'000)",
y = "",
caption = 'ho') +
theme_ridges(grid = T, center_axis_labels = T)
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, quantile_lines = T, quantiles = 2) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = "",
caption = 'ho') +
theme_ridges(grid = T, center_axis_labels = T)
ggplot(dt, aes(year_income, generation, fill = generation)) +
geom_density_ridges(alpha = .8, scale = 4, quantile_lines = T, quantiles = 2) +
scale_y_discrete(expand = c(0, 0)) +
scale_x_continuous(expand = c(0, 0)) +
scale_fill_manual(values = wes_palette("Zissou1"), guide = 'none') +
labs(
x = "Annual income (in £'000)",
y = "",
caption = "Notes: Shows distribution of estimated annual income in £'000 for ) by generation. Vertical lines are medians."
)+
theme_ridges(grid = T, center_axis_labels = T)
library(data.table)
dt <- setDT(readRDS('~/data_XX0.RDS'))
dt
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2', "NOT_CRAN"=TRUE)
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2', NOT_CRAN=TRUE)
require('pacman')
!require('pacman')
!require('arrow')
?require
update.packages()
Sys.info()['sysname']
# List the library paths
# The issue is likely to be in the first directory
paths = .libPaths()
## Try and detect bad files
list.files(paths,
pattern = "^00LOCK*|*\\.rds$|*\\.RDS$",
full.names = TRUE)
## List files of size 0
l = list.files(paths, full.names = TRUE)
l[sapply(l, file.size) == 0]
Sys.getenv()
Sys.getenv('R_LIBS_USER')
Sys.getenv('R_LIBS_USER')
.libPhats()
.libPaths()
readRDS('~/dev/projects/mdb/mdb/data_savings_XX0.rds')
load('~/dev/projects/mdb/mdb/data_savings_XX0.rds')
readRDS('~/dev/projects/mdb/mdb/data_savings_XX0.rds')
readRDS('~/dev/projects/mdb/mdb/data_savings_XX0.rds')

source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
library(aws.s3)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
Sys.setenv(AWS_PROFILE='3di')
library(aws.s3)
library(data.table)
aws.s3::bucket_exists('s3://3di-data-mdb/raw')
aws.s3::bucket_exists('s3://3di-data-mdb/raw/')
Sys.setenv(AWS_PROFILE='3di')
library(aws.s3)
library(data.table)
aws.s3::bucket_exists('s3://3di-data-mdb/raw/')
aws.s3::bucket_exists('s3://fgu-data-mdb')
aws.s3::bucket_exists('s3://fgu-data-mdb')
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
Sys.setenv(
# AWS_PROFILE='3di',
AWS_DEFAULT_REGION='eu-west-2'
)
aws.s3::bucket_exists('s3://fgu-data-mdb')
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
library(arrow)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
data
type(data)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
install.packages(plm)
install.packages('plm')
library(plm)
head(df)
summary(df)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
type(data.tabl(a=c(1, 2)))
type(data.table(a=c(1, 2)))
df.info()
info(df)
df = read_analysis_data()
checkDT(df)
library(data.table)
checkDT(df)
df
df[region == 'Scotland']
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
head(df)
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
library(arrow)
library(aws.s3)
library(data.table)
library(stargazer)
library(plm)
TABDIR = '/Users/fgu/dev/projects/entropy/output/tables'
read_analysis_data <- function() {
fn = 'analysis_XX7.parquet'
bucket = 's3://3di-project-entropy'
fp = file.path(bucket, fn)
data = aws.s3::s3read_using(arrow::read_parquet, object=fp)
return(setDT(data, keep.rownames = TRUE))
}
df = read_analysis_data()
plm(has_sa_inflows ~ entropyz,
data=df,
index = c('user_id'),
model = 'within',
)
plm(has_sa_inflows ~ entropyz,
data=df,
index = c('user_id', 'month'),
model = 'within',
)
plm(has_sa_inflows ~ entropyz,
data=df,
index = c('user_id'),
model = 'within',
)
df&month <- factor(df&month)
df&month <- factor(df&month)
df&month <- as.factor(df&month)
df$month <- factor(df$month)
plm(has_sa_inflows ~ entropyz + month,
data=df,
index = c('user_id'),
model = 'within',
)
m1 <- plm(has_sa_inflows ~ entropyz + month,
data=df,
index = c('user_id'),
model = 'within',
)
m2 <- plm(has_sa_inflows ~ entropyz + month_spend + month,
data=df,
index = c('user_id'),
model = 'within',
)
m3 <- plm(has_sa_inflows ~ entropyz + month_spend + month_income + month,
data=df,
index = c('user_id'),
model = 'within',
)
m4 <- plm(has_sa_inflows ~ entropyz + month_income + spend_communication + spend_services + spend_finance + spend_motor + spend_travel + spend_hobbies + spend_other_spend + spend_household + spend_retail + user_id + month,
data=df,
index = c('user_id'),
model = 'within',
)
stargazer(m1, m2, m3, m4,
title='Main results',
out=file.path(TABDIR, 'main_results.tex'),
omit.stat=c("LL","ser","f"),
no.space=TRUE,
style = 'aer'
)
stargazer(m1, m2, m3, m4,
title='Main results',
out=file.path(TABDIR, 'main_results.tex'),
omit.stat=c("LL","ser","f"),
no.space=TRUE,
style = 'qje'
)

stargazer(
m1, m2, m3, m4,
type = 'text',
title='Main results',
covariate.labels = c(
'Entropy',
'Month spend',
'Month income',
'Spend communication',
'Spend services',
'Spend finance',
'Spend motor',
'Spend travel',
'Spend hobbies',
'Spend household',
'Spend retail',
'Spend other'
),
report = 'vct',
keep.stat = c('n', 'rsq'),
no.space = TRUE,
dep.var.labels.include = FALSE,
dep.var.caption = "Dependent variable: has transfers into savings account",
omit = '^month\\d+$',
add.lines = list(
c('Individual fixed effects', 'Yes', 'Yes', 'Yes', 'Yes'),
c('Month fixed effects', 'Yes', 'Yes', 'Yes', 'Yes')
),
notes.align = 'l',
notes.append = FALSE,
notes.label = "",
notes = 'Note: ... *p<0.1; **p<0.05; ***p<0.01.',
label = 'tab:main_results',
# font.size = 'footnotesize',
out=file.path(TABDIR, 'main_results.tex')
)
stargazer(
m1, m2, m3, m4,
type = 'text',
title='Main results',
covariate.labels = c(
'Entropy',
'Month spend',
'Month income',
'Spend communication',
'Spend services',
'Spend finance',
'Spend motor',
'Spend travel',
'Spend hobbies',
'Spend household',
'Spend retail',
'Spend other'
),
report = 'vct',
keep.stat = c('n', 'rsq'),
no.space = TRUE,
dep.var.labels.include = FALSE,
dep.var.caption = "Dependent variable: has transfers into savings account",
omit = '^month\\d+$',
add.lines = list(
c('Individual fixed effects', 'Yes', 'Yes', 'Yes', 'Yes'),
c('Month fixed effects', 'Yes', 'Yes', 'Yes', 'Yes')
),
notes.align = 'l',
notes.append = FALSE,
notes.label = "",
notes = 'Note: ... *p<0.1; **p<0.05; ***p<0.01.',
label = 'tab:main_results',
min.max = T,
# font.size = 'footnotesize',
out=file.path(TABDIR, 'main_results.tex')
)
stargazer(
m1, m2, m3, m4,
type = 'text',
title='Main results',
covariate.labels = c(
'Entropy',
'Month spend',
'Month income',
'Spend communication',
'Spend services',
'Spend finance',
'Spend motor',
'Spend travel',
'Spend hobbies',
'Spend household',
'Spend retail',
'Spend other'
),
report = 'vct',
keep.stat = c('n', 'rsq'),
no.space = TRUE,
dep.var.labels.include = FALSE,
dep.var.caption = "Dependent variable: has transfers into savings account",
omit = '^month\\d+$',
add.lines = list(
c('Individual fixed effects', 'Yes', 'Yes', 'Yes', 'Yes'),
c('Month fixed effects', 'Yes', 'Yes', 'Yes', 'Yes')
),
notes.align = 'l',
notes.append = FALSE,
notes.label = "",
notes = 'Note: ... *p<0.1; **p<0.05; ***p<0.01.',
label = 'tab:main_results',
# font.size = 'footnotesize',
out=file.path(TABDIR, 'main_results.tex')
)
source('helpers.R')
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/helpers.R')
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/analysis.R', echo=TRUE)
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
library(arrow)
library(aws.s3)
library(data.table)
library(fixest)
library(modelsummary)
library(plm)
library(stargazer)
source('helpers.R')
TABDIR = '/Users/fgu/dev/projects/entropy/output/tables'
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
library(arrow)
library(aws.s3)
library(data.table)
library(fixest)
library(modelsummary)
library(plm)
library(stargazer)
source('helpers.R')
TABDIR = '/Users/fgu/dev/projects/entropy/output/tables'
source('helpers.R')
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
library(arrow)
library(aws.s3)
library(data.table)
library(fixest)
library(modelsummary)
library(plm)
library(stargazer)
source('helpers.R')
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
library(arrow)
library(aws.s3)
library(data.table)
library(fixest)
library(modelsummary)
library(plm)
library(stargazer)
source('helpers.R')
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
library(arrow)
library(aws.s3)
library(data.table)
library(fixest)
library(modelsummary)
library(plm)
library(stargazer)
setwd(~/dev/projects/entropy/entropy/analysis)
source('helpers.R')
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
library(arrow)
library(aws.s3)
library(data.table)
library(fixest)
library(modelsummary)
library(plm)
library(stargazer)
setwd(~/dev/projects/entropy/entropy/analysis)
source('helpers.R')
getwd()
setwd('~/dev/projects/entropy/entropy/analysis')
source('helpers.R')
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
library(arrow)
library(aws.s3)
library(data.table)
library(fixest)
library(modelsummary)
library(plm)
library(stargazer)
setwd('~/dev/projects/entropy/entropy/analysis')
source('helpers.R')
TABDIR = '/Users/fgu/dev/projects/entropy/output/tables'
df = read_analysis_data()
df$month <- factor(df$month)
head(df)
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
library(arrow)
library(aws.s3)
library(data.table)
library(fixest)
library(modelsummary)
library(plm)
library(stargazer)
setwd('~/dev/projects/entropy/entropy/analysis')
source('helpers.R')
TABDIR = '/Users/fgu/dev/projects/entropy/output/tables'
df = read_analysis_data()
head(df)
m1 <- plm(has_sa_inflows ~ entropyz + month,
data=df, index = c('user_id'))
m2 <- plm(has_sa_inflows ~ entropyz + month_spend + month,
data=df, index = c('user_id'))
m3 <- plm(has_sa_inflows ~ entropyz + month_spend + month_income + month,
data=df, index = c('user_id'))
m4 <- plm(has_sa_inflows ~ entropyz + month_income + spend_communication + spend_services + spend_finance + spend_motor + spend_travel + spend_hobbies + spend_household + spend_retail + spend_other_spend + month,
data=df, index = c('user_id'))
stargazer(
m1, m2, m3, m4,
type = 'text',
title='Main results',
covariate.labels = c(
'Entropy',
'Month spend',
'Month income',
'Spend communication',
'Spend services',
'Spend finance',
'Spend motor',
'Spend travel',
'Spend hobbies',
'Spend household',
'Spend retail',
'Spend other'
),
report = 'vct',
keep.stat = c('n', 'rsq'),
no.space = TRUE,
dep.var.labels.include = FALSE,
dep.var.caption = "Dependent variable: has transfers into savings account",
omit = '^month\\d+$',
add.lines = list(
c('Individual fixed effects', 'Yes', 'Yes', 'Yes', 'Yes'),
c('Month fixed effects', 'Yes', 'Yes', 'Yes', 'Yes')
),
notes.align = 'l',
notes.append = FALSE,
notes.label = "",
notes = 'Note: ... *p<0.1; **p<0.05; ***p<0.01.',
label = 'tab:main_results',
# font.size = 'footnotesize',
out=file.path(TABDIR, 'main_results.tex')
)
Sys.setenv(AWS_PROFILE='3di', AWS_DEFAULT_REGION='eu-west-2')
setwd('~/dev/projects/entropy/entropy/analysis')
source('helpers.R')
library(data.table)
library(fixest)
library(modelsummary)
library(plm)
library(stargazer)
TABDIR = '/Users/fgu/dev/projects/entropy/output/tables'
df = read_analysis_data()
head(df)
source('~/dev/projects/entropy/entropy/analysis/figures.R', echo=TRUE)
source('~/dev/projects/entropy/entropy/analysis/figures.R', echo=TRUE)
library(ggplot2)
ggplot(data = df) +
geom_bar(mapping = aes(x = txns_count))
ggplot(data = df) +
geom_bar(mapping = aes(x = txns_count, y = ..prop..))
ggplot(df, aes(txns_count)) +
geom_histogram()
ggplot(df, aes(txns_count)) +
geom_histogram(binwidth = 20)
ggplot(df, aes(txns_count)) +
geom_histogram(binwidth = 10)
ggplot(df, aes(txns_count)) +
geom_histogram(binwidth = 10) +
xlim(0, 500)
ggplot(df, aes(txns_count)) +
geom_histogram(binwidth = 5) +
xlim(0, 500)
ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=1) +
xlim(0, 500)
ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=5) +
xlim(0, 500)
ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=5, stat = 'percent') +
xlim(0, 500) +
labs(
x = 'Spend transactions per user-month'
)
ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=5, stat = 'pct') +
xlim(0, 500) +
labs(
x = 'Spend transactions per user-month'
)
ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=5, stat = 'pct') +
xlim(0, 500) +
labs(
x = 'Spend transactions per user-month'
)
ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=5, stat = 'prop') +
xlim(0, 500) +
labs(
x = 'Spend transactions per user-month'
)
ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=5) +
xlim(0, 500) +
labs(
x = 'Spend transactions per user-month'
)
ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=5) +
xlim(0, 500) +
labs(
x = 'Spend transactions per user-month',
y = 'Number of observations'
)
df
melt(df, id.vars = c('user_id', 'date'), measure.vars = c('txns_count', 'entropy'))
head(long)
long <- melt(df, id.vars = c('user_id', 'date'), measure.vars = c('txns_count', 'entropy'))
head(long)
ggplot(long, aes(value)) +
geom_histogram(binwidth = 5) +
facet_wrap(~variable)
ggplot(long, aes(value)) +
geom_histogram(binwidth = 5) +
facet_wrap(~variable, scales = 'free')
long
ggplot(long, aes(value)) +
geom_histogram(binwidth = 1) +
facet_wrap(~variable, scales = 'free')
ggplot(long, aes(value)) +
geom_histogram() +
facet_wrap(~variable, scales = 'free')
p1 <- ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=5) +
xlim(0, 500) +
labs(
x = 'Spend transactions per user-month',
y = 'Number of observations'
)
p1
p1 <- ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=5) +
xlim(0, 250) +
labs(
x = 'Spend transactions per user-month',
y = 'Number of observations'
)
p1
p1 <- ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=1) +
xlim(0, 250) +
labs(
x = 'Spend transactions per user-month',
y = 'Number of observations'
)
p1
p1 <- ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=5) +
xlim(0, 250) +
labs(
x = 'Spend transactions per user-month',
y = 'Number of observations'
)
p1
entropy_hist  <- ggplot(df, aes(entropy)) +
geom_histogram() +
txn_hist
ggplot(df, aes(entropy)) +
geom_histogram() +
txn_hist + entropy_hist
ggplot(df, aes(entropy)) +
geom_histogram() +
txn_hist + entropy_hist
ggplot(df, aes(entropy)) +
geom_histogram() +
txn_hist + entropy_hist
txn_hist <- ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=5) +
xlim(0, 250) +
labs(
x = 'Spend transactions per user-month',
y = 'Number of observations'
)
ggplot(df, aes(entropy)) +
geom_histogram() +
txn_hist + entropy_hist
ggplot(df, aes(entropy)) +
geom_histogram() +
ggplot(df, aes(entropy)) +
geom_histogram()
ggplot(df, aes(entropy)) +
geom_histogram()
ggplot(df, aes(entropy)) +
geom_histogram(binwidth = .1)
ggplot(df, aes(entropy)) +
geom_histogram(binwidth = .01)
ggplot(df, aes(entropy)) +
geom_histogram(binwidth = .05)
ggplot(df, aes(entropy)) +
geom_histogram(binwidth = .025)
ggplot(df, aes(entropy)) +
geom_histogram(binwidth = .05)
source('~/dev/projects/entropy/entropy/analysis/figures.R', echo=TRUE)
install.packages('patchwork')
library(patchwork)
p1 + p2
p1 <- ggplot(df, aes(txns_count)) +
geom_histogram(binwidth=5) +
xlim(0, 500) +
labs(
x = 'Spend transactions per user-month',
y = 'Number of observations'
)
p1 + p2
df
dt[, .SD, .SDcols = names(dt) %like% "^spend_"]
dt = read_analysis_data()
dt[, .SD, .SDcols = names(dt) %like% "^spend_"]
dt[, .ST > 0, .SDcols = names(dt) %like% "^spend_"]
dt[, .SD > 0, .SDcols = names(dt) %like% "^spend_"]
dt[, .SD, .SDcols = names(dt) %like% "^spend_"]
dt[, .SD > 0, .SDcols = names(dt) %like% "^spend_"]
dt[, sum(.SD > 0), .SDcols = names(dt) %like% "^spend_"]
dt[, rowSums(.SD > 0), .SDcols = names(dt) %like% "^spend_"]
ggplot(num_spend_cats) +
geom_histogram()
num_spend_cats <- dt[, rowSums(.SD > 0), .SDcols = names(dt) %like% "^spend_"]
ggplot(num_spend_cats) +
geom_histogram()
ggplot() +
geom_histogram(num_spend_cats)
ggplot() +
geom_histogram(aes(num_spend_cats))
ggplot() +
geom_count(aes(num_spend_cats))
ggplot() +
geom_count(aes(num_spend_cats))
ggplot() +
geom_count(aes(y = num_spend_cats))
ggplot() +
geom_bars(aes(x = num_spend_cats))
ggplot() +
geom_bar(aes(x = num_spend_cats))
ggplot() +
geom_bar(aes(x = num_spend_cats)) +
labs(
x = 'Number of distinct spending categories per user-month'
y = 'Number of observations'
)
ggplot() +
geom_bar(aes(x = num_spend_cats)) +
labs(
x = 'Number of distinct spending categories per user-month',
y = 'Number of observations'
)
p1 + p2 + p3
p1 <- ggplot(dt, aes(txns_count)) +
geom_histogram(binwidth=5) +
xlim(0, 500) +
labs(
x = 'Spend transactions per user-month',
y = 'Number of observations'
)
num_spend_cats <- dt[, rowSums(.SD > 0), .SDcols = names(dt) %like% "^spend_"]
p2 <- ggplot() +
geom_bar(aes(x = num_spend_cats)) +
labs(
x = 'Number of distinct spending categories per user-month',
y = 'Number of observations'
)
p3 <- ggplot(dt, aes(entropy)) +
geom_histogram(binwidth = .05) +
labs(
x = 'Spending entropy',
y = 'Number of observations'
)
p1 + p2 + p3
p1 <- ggplot(dt, aes(txns_count)) +
geom_histogram(binwidth=5) +
xlim(0, 500) +
labs(
x = 'Spend transactions',
y = 'Number of observations'
)
num_spend_cats <- dt[, rowSums(.SD > 0), .SDcols = names(dt) %like% "^spend_"]
p2 <- ggplot() +
geom_bar(aes(x = num_spend_cats)) +
labs(
x = 'Distinct spending categories',
y = 'Number of observations'
)
p3 <- ggplot(dt, aes(entropy)) +
geom_histogram(binwidth = .05) +
labs(
x = 'Spending entropy',
y = 'Number of observations'
)
p1 + p2 + p3
p1 + p2 + p3 & theme_minimal()
p1 + p2 + p3 & theme_minimal() + plot_annotation(caption = 'This is the beginning of some long note.')
p1 + p2 + p3 & theme_minimal() + plot_annotation(caption = 'This is the beginning of some long note.')
p1 + p2 + p3 & theme_minimal() + plot_annotation(title = 'ho', caption = 'This is the beginning of some long note.')
p1 + p2 + p3 & theme_minimal()
ggsave(file.path(FIGDIR, 'entropy_hists.png'))
FIGDIR = '/Users/fgu/dev/projects/entropy/output/figures'
ggsave(file.path(FIGDIR, 'entropy_hists.png'))
